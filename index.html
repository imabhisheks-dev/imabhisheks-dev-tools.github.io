<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abhishek Dev Tools</title>
    <link rel="stylesheet" href="style.css">
    <!-- Using only Luxon for better performance -->
    <script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
    <!-- Chart.js for EMI visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="navbar">
        <a href="#" onclick="showSection('timezone-converter')">TimeZone Converter</a>
        <a href="#" onclick="showSection('json-formatter')">JSON Formatter</a>
        <a href="#" onclick="showSection('xml-formatter')">XML Formatter</a>
        <a href="#" onclick="showSection('emi-calculator')">EMI Calculator</a>
    </div>

    <div class="container" id="timezone-converter">
        <h1>Time Zone Converter</h1>
        <div class="timezone-container">
            <div class="timezone-input-group">
                <label for="time-input">Enter Time:</label>
                <input type="time" class="inline-time" id="time-input" />
            </div>
            <div class="timezone-input-group">
                <label for="source-timezone">Source Time Zone:</label>
                <select id="source-timezone">
                    <option value="Asia/Kolkata">(IST) India - Delhi</option>
                    <option value="America/New_York">(EST/ET) USA - New York</option>
                    <option value="America/Los_Angeles">(PT) USA - Los Angeles</option>
                    <option value="Europe/London">(CET) UK - London</option>
                    <option value="UTC">(UTC) Coordinated Universal Time</option>
                    <option value="Asia/Jerusalem">Israel - Jerusalem</option>
                    <option value="Asia/Tehran">Iran - Tehran</option>
                    <option value="Europe/Moscow">Russia - Moscow</option>
                    <option value="Europe/Kyiv">Ukraine - Kyiv</option>
                    <option value="Australia/Sydney">Australia - Sydney</option>
                    <option value="America/Toronto">(PST) Canada - Toronto</option>
                </select>
            </div>

            <div class="timezone-input-group">
                <label for="target-timezone">Target Time Zone:</label>
                <select id="target-timezone">
                    <option value="Asia/Kolkata">(IST) India - Delhi</option>
                    <option value="America/New_York">(EST/ET) USA - New York</option>
                    <option value="America/Los_Angeles">(PT) USA - Los Angeles</option>
                    <option value="Europe/London">(CET) UK - London</option>
                    <option value="UTC">(UTC) Coordinated Universal Time</option>
                    <option value="Asia/Jerusalem">Israel - Jerusalem</option>
                    <option value="Asia/Tehran">Iran - Tehran</option>
                    <option value="Europe/Moscow">Russia - Moscow</option>
                    <option value="Europe/Kyiv">Ukraine - Kyiv</option>
                    <option value="Australia/Sydney">Australia - Sydney</option>
                    <option value="America/Toronto">(PST) Canada - Toronto</option>
                </select>
            </div>
        </div>

        <div>
            <button onclick="convertTime()">Convert Time</button>
        </div>

        <h2 id="target-timezone-result"></h2>
        <div id="other-timezone-result"></div>

        <hr class="separator" />

        <h1>Live World Clock</h1>
        <div class="clock-container" id="clockContainer">
            <!-- Clocks will be injected by JavaScript -->
        </div>
    </div>


    <div class="container hidden" id="json-formatter">
        <h1>JSON Formatter</h1>
        <div class="formatter-container">
            <div class="formatter-section">
                <h3>Input JSON</h3>
                <label for="json-input">Paste JSON here:</label>
                <div class="checkbox-container">
                    <div class="checkbox-item">
                        <input type="checkbox" class="inline-jsonformat-checkbox" id="cb-quote" />
                        <label for="cb-quote">Remove \" â†’ ""</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" class="inline-jsonformat-checkbox" id="cb-newline" />
                        <label for="cb-newline">Remove \n â†’ ""</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" class="inline-jsonformat-checkbox" id="cb-carriage" />
                        <label for="cb-carriage">Remove \r â†’ ""</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" class="inline-jsonformat-checkbox" id="cb-open-close-brace" />
                        <label for="cb-open-close-brace">Fix "{,}" â†’ "{}"</label>
                    </div>
                </div>
                <textarea id="json-input" rows="30" placeholder="Paste your JSON here..." aria-label="JSON Input"></textarea>
                <button onclick="formatJSON()">Format JSON</button>
            </div>

            <div class="formatter-section">
                <h3>Formatted JSON</h3>
                <div class="inline-jsonformat-message" id="formatted-json-message">
                    Ready to format JSON...
                </div>
                <textarea id="formatted-json-response" rows="30" readonly placeholder="Formatted JSON will appear here..." aria-label="Formatted JSON Output"></textarea>
                <button onclick="copyFormattedJSON()">Copy to Clipboard</button>
            </div>
        </div>
    </div>


    <div class="container hidden" id="xml-formatter">
        <h1>XML Formatter</h1>
        <div class="formatter-container">
            <div class="formatter-section">
                <h3>Input XML</h3>
                <label for="xml-input">Paste XML here:</label>
                <textarea id="xml-input" rows="30" placeholder="Paste your XML here..." aria-label="XML Input"></textarea>
                <button onclick="formatXML()">Format XML</button>
            </div>

            <div class="formatter-section">
                <h3>Formatted XML</h3>
                <label for="formatted-xml">Formatted XML:</label>
                <textarea id="formatted-xml" rows="30" readonly placeholder="Formatted XML will appear here..." aria-label="Formatted XML Output"></textarea>
                <button onclick="copyFormattedXML()">Copy to Clipboard</button>
            </div>
        </div>
    </div>

    <div class="container hidden" id="emi-calculator">
        <h1>EMI Calculator</h1>
        <p class="description">Calculate your EMI (Equated Monthly Installment) based on the principal amount,
            interest rate, and tenure.</p>
        <div class="emi-calculator-container">
            <div class="emi-input-group">
                <input type="text" id="principal" class="emi-input" placeholder="ðŸ’° Principal Amount (â‚¹)" />
            </div>
            <div class="emi-input-group">
                <input type="number" id="interest" class="emi-input" placeholder="ðŸ“ˆ Interest Rate (%)" step="0.01" />
            </div>
            <div class="emi-input-group">
                <input type="number" id="tenure-months" class="emi-input" placeholder="ðŸ“… Tenure (Months)" step="3" />
            </div>
            <div class="emi-input-group">
                <input type="date" id="disbursal-date" class="emi-input" placeholder="ðŸ“† Disbursal Date" />
            </div>
        </div>

        <hr class="separator" />
        <div class="emi-calculator-container">
            <div class="emi-result">
                <h3>Monthly EMI â‚¹</h3>
                <p class="amount"><span id="emi">0</span></p>
            </div>
            <div class="emi-result">
                <h3>Total Interest â‚¹</h3>
                <p class="amount"><span id="total-interest">0</span></p>
            </div>
            <div class="emi-result">
                <h3>Principal Amount â‚¹</h3>
                <p class="amount"><span id="principal-result">0</span></p>
            </div>
            <div class="emi-result">
                <h3>Total Payment â‚¹</h3>
                <p class="amount"><span id="total-payment">0</span></p>
            </div>
        </div>
        <hr class="separator" />

        <!-- EMI Charts Section -->
        <div class="charts-container">
            <div class="chart-section">
                <h3>Payment Breakdown</h3>
                <div class="chart-wrapper">
                    <canvas id="paymentBreakdownChart"></canvas>
                </div>
            </div>
            <div class="chart-section chart-section-large">
                <h3>Interest vs Principal (Year by Year)</h3>
                <div class="chart-wrapper">
                    <canvas id="yearlyBreakdownChart"></canvas>
                </div>
            </div>
        </div>
        <hr class="separator" />

        <!-- Export Button -->
        <div class="export-section">
            <button onclick="exportEmiScheduleToCSV()"><strong>ðŸ“Š Export Schedule to CSV</strong></button>
        </div>

        <div class="table-container">
            <table id="emi-schedule">
                <thead>
                    <tr>
                        <th colspan="6" class="table-header">
                            EMI Schedule
                        </th>
                    </tr>
                    <tr>
                        <th>Period</th>
                        <th>Date</th>
                        <th>EMI (â‚¹)</th>
                        <th>Interest (â‚¹)</th>
                        <th>Principal (â‚¹)</th>
                        <th>Balance (â‚¹)</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="export-table">
            <table id="emi-schedule-export">
                <thead>
                    <tr>
                        <th>Period</th>
                        <th>Date</th>
                        <th>EMI</th>
                        <th>Interest</th>
                        <th>Principal</th>
                        <th>Balance</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>


    <script src="script.js"></script>
</body>

</html>